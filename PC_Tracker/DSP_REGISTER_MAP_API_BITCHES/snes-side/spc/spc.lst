0001   2000             .org $2000
0002   2000             
0003   2000                 
0004   2000             Init:
0005   2000                 ;and a, #$ff
0006   2000 2F FE           bra Init
0007   2002                 ; clear loop
0008   2002 8F 00 04        mov $4, #0
0009   2005 8F 02 05        mov $5, #2   ; $200
0010   2008 8F 00 06        mov $6, #$00 ; sample size in bytes
0011   200B 8F 02 07        mov $7, #$02 ; decw
0012   200E 8F 1C 08        mov $8, #$1c ; interval of $100
0013   2011 E8 00           mov a, #0
0014   2013 8D 00           mov y, #0
0015   2015                 ; begin loop
0016   2015             bak:
0017   2015 FD              mov y,a
0018   2016 F7 04           mov a, [$4]+Y
0019   2018 28 FD           and a, #~2
0020   201A D7 04           mov [$4]+Y,A
0021   201C DD              mov a,y
0022   201D 60              clrc
0023   201E 88 09           adc a, #9
0024   2020 90 F3           bcc bak
0025   2022 8B 08           dec $08
0026   2024 F0 04           beq donez 
0027   2026 AB 05           inc $05
0028   2028 2F EB           bra bak
0029   202A             donez:
0030   202A E8 3B           mov a, #$3B; #$3B ;#$39
0031   202C C5 90 1D        mov !$1d90, a
0032   202F 8F 5D F2        mov $F2, #$5D   ; starting address = $3000
0033   2032 8F 30 F3        mov $F3, #$30
0034   2035             
0035   2035                 ;mov a, !$200
0036   2035                 ;and a, #$FD
0037   2035                 ;mov !$200, a
0038   2035                 
0039   2035 E8 00           mov a, #$00
0040   2037 C5 00 30        mov !$3000, a
0041   203A E8 02           mov a, #$02
0042   203C C5 01 30        mov !$3001, a
0043   203F E8 91           mov a, #$91
0044   2041 C5 02 30        mov !$3002, a
0045   2044 E8 16           mov a, #$16
0046   2046 C5 03 30        mov !$3003, a
0047   2049             
0048   2049 8F 00 F2        mov $F2, #$00       ; left volume = 127
0049   204C 8F 7F F3        mov $F3, #127
0050   204F 8F 01 F2        mov $F2, #$01       ; right volume = 127 
0051   2052 8F 7F F3        mov $F3, #127
0052   2055             
0053   2055 8F 02 F2        mov $F2, #$02       ; pitch (low byte) 
0054   2058 8F 00 F3        mov $F3, #$00 
0055   205B 8F 03 F2        mov $F2, #$03       ; pitch (high byte) 
0056   205E 8F 10 F3        mov $F3, #$10
0057   2061                 
0058   2061 8F 04 F2        mov $F2, #$04       ; source number = 0 
0059   2064 8F 00 F3        mov $F3, #$00
0060   2067                 
0061   2067                 
0062   2067 8F 05 F2        mov $F2, #$05 
0063   206A 8F 00 F3        mov $F3, #$00 
0064   206D 8F 07 F2        mov $F2, #$07 
0065   2070 8F 1F F3        mov $F3, #$1f   ; set GAIN, direct mode (bit7=0), full volume
0066   2073                 
0067   2073             
0068   2073             
0069   2073                 ; Voice 1
0070   2073             
0071   2073 8F 10 F2        mov $F2, #$10       ; left volume = 127
0072   2076 8F 01 F3        mov $F3, #1
0073   2079 8F 11 F2        mov $F2, #$11       ; right volume = 127 
0074   207C 8F 01 F3        mov $F3, #1
0075   207F             
0076   207F 8F 12 F2        mov $F2, #$12       ; pitch (low byte) 
0077   2082 8F 00 F3        mov $F3, #$00 
0078   2085 8F 13 F2        mov $F2, #$13       ; pitch (high byte) 
0079   2088 8F 10 F3        mov $F3, #$10
0080   208B                 
0081   208B 8F 14 F2        mov $F2, #$14       ; source number = 0 
0082   208E 8F 00 F3        mov $F3, #$00
0083   2091                 
0084   2091                 
0085   2091 8F 15 F2        mov $F2, #$15 
0086   2094 8F 00 F3        mov $F3, #$00 
0087   2097 8F 17 F2        mov $F2, #$17 
0088   209A 8F 1F F3        mov $F3, #$1f   ; set GAIN, direct mode (bit7=0), full volume
0089   209D                 
0090   209D 8F 0C F2        mov $F2, #$0C 
0091   20A0 8F 7F F3        mov $F3, #127   ; L/R vol 100% both voices 
0092   20A3 8F 1C F2        mov $F2, #$1C
0093   20A6 8F 7F F3        mov $F3, #127
0094   20A9                 
0095   20A9                 
0096   20A9                 
0097   20A9             
0098   20A9 8F 6C F2        mov $F2, #$6C   ; turn off mute
0099   20AC 8F 00 F3        mov $F3, #0
0100   20AF             
0101   20AF                 ;
0102   20AF 8F 20 FA        mov $FA, #$20
0103   20B2 8F 01 F1        mov $f1, #1
0104   20B5             
0105   20B5 E8 00           mov a, #0
0106   20B7 C5 00 08        mov !$800, a
0107   20BA             
0108   20BA 8F 4C F2        mov $F2, #$4C
0109   20BD 8F 00 F3        mov $f3, #0
0110   20C0 8F 01 F3        mov $F3, #$01
0111   20C3             
0112   20C3             loop:    
0113   20C3 E4 FD           mov a, $fd
0114   20C5 F0 FC           beq loop
0115   20C7             
0116   20C7                 ; if a > 0
0117   20C7 60              clrc
0118   20C8 85 00 08        adc a, !$800
0119   20CB C5 00 08        mov !$800, a
0120   20CE             
0121   20CE 68 40           cmp a, #$40
0122   20D0 D0 F1           bne loop
0123   20D2             
0124   20D2 E8 00           mov a, #0
0125   20D4 C5 00 08        mov !$800, a
0126   20D7                 
0127   20D7                 ;mov $F2, #$04       ; source number = 0 
0128   20D7                 ;mov $F3, #$01
0129   20D7             
0130   20D7                 ;mov $F2, #$4C
0131   20D7                 ;mov $f3, #0
0132   20D7                 ;mov $F2, #$5C
0133   20D7                 ;mov a, $f3
0134   20D7                 ;beq up
0135   20D7                 ;mov $f3, #$00
0136   20D7             derp:
0137   20D7 2F FE           bra derp;
0138   20D9 2F E8           bra loop
0139   20DB             up:
0140   20DB 8F 01 F3        mov $f3, #1
0141   20DE             
0142   20DE             
0143   20DE 2F E3           bra loop
0144   20E0             
0145   20E0             .END
0146   20E0             EOFtasm: Number of errors = 0
